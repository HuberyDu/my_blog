function get_tags(){$.ajax({cache:!0,type:"GET",dataType:"json",async:!1,url:"/tags/auto_complete_life_tag",success:function(t){tagList=t}})}function trimSpace(t,a,e){e[a]=t.trim()}var projectTags=[],tagList=[];$(document).ready(function(){get_tags(),$("#addTagInput").autocomplete({lookup:tagList}),""!=$("input#life_tag_list").val()&&(projectTags=$("input#life_tag_list").val().split(",")),projectTags.forEach(trimSpace);for(var t in projectTags)$("#tag_list").append("<li><b>"+projectTags[t]+"</b><a href='#'>X</a></li>");projectTags.length>0&&$("#tag_list li a").click(delTag),$("#addTagBtn").mousedown(function(t){var a=$("#addTagInput").val();if(!(a.length<1)){if(projectTags.indexOf(a)>-1)return alert("tag "+a+" already exist"),void 0;if(a.indexOf(",")>0)return alert("no comma"),void 0;console.log(a),projectTags.push(a);var e=$("<a href='#'>X</a>").click(delTag),i=$("<li><b>"+a+"</b></li>").append(e);$("#tag_list").append(i),$("#addTagInput").val(""),t.preventDefault()}}),$("#addTagInput").keydown(function(t){13==t.keyCode&&t.preventDefault()}),$("form").submit(function(){var t=projectTags.join(",");$("input#life_tag_list").val(t)})});var delTag=function(t){var a=$(this).parent().find("b").text();$(this).parent().remove();var e=projectTags.indexOf(a);projectTags.splice(e,1),t.preventDefault()};