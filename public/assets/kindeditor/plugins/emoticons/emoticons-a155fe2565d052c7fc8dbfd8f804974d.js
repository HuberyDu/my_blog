/*******************************************************************************
* KindEditor - WYSIWYG HTML Editor for Internet
* Copyright (C) 2006-2011 kindsoft.net
*
* @author Roddy <luolonghao@gmail.com>
* @site http://www.kindsoft.net/
* @licence http://www.kindsoft.net/license.php
*******************************************************************************/
KindEditor.plugin("emoticons",function(e){var t=this,n="emoticons",i=t.emoticonsPath||t.pluginsPath+"emoticons/images/",r=void 0===t.allowPreviewEmoticons?!0:t.allowPreviewEmoticons,a=1;t.clickToolbar(n,function(){function o(n,r,a){w?n.mouseover(function(){r>v?(w.css("left",0),w.css("right","")):(w.css("left",""),w.css("right",0)),k.attr("src",i+a+".gif"),e(this).addClass("ke-on")}):n.mouseover(function(){e(this).addClass("ke-on")}),n.mouseout(function(){e(this).removeClass("ke-on")}),n.click(function(e){t.insertHtml('<img src="'+i+a+'.gif" border="0" alt="" />').hideMenu().focus(),e.stop()})}function s(t,n){var r=document.createElement("table");n.append(r),w&&(e(r).mouseover(function(){w.show("block")}),e(r).mouseout(function(){w.hide()}),b.push(e(r))),r.className="ke-table",r.cellPadding=0,r.cellSpacing=0,r.border=0;for(var a=(t-1)*m+p,s=0;u>s;s++)for(var l=r.insertRow(s),c=0;f>c;c++){var d=e(l.insertCell(c));d.addClass("ke-cell"),o(d,c,a);var h=e('<span class="ke-img"></span>').css("background-position","-"+24*a+"px 0px").css("background-image","url("+i+"static.gif)");d.append(h),b.push(d),a++}return r}function l(){e.each(b,function(){this.unbind()})}function c(e,t){e.click(function(e){l(),x.parentNode.removeChild(x),C.remove(),x=s(t,_),d(t),a=t,e.stop()})}function d(t){C=e('<div class="ke-page"></div>'),_.append(C);for(var n=1;g>=n;n++){if(t!==n){var i=e('<a href="javascript:;">['+n+"]</a>");c(i,n),C.append(i),b.push(i)}else C.append(e("@["+n+"]"));C.append(e("@&nbsp;"))}}var u=5,f=9,h=135,p=0,m=u*f,g=Math.ceil(h/m),v=Math.floor(f/2),_=e('<div class="ke-plugin-emoticons"></div>'),b=[],y=t.createMenu({name:n,beforeRemove:function(){l()}});y.div.append(_);var w,k;r&&(w=e('<div class="ke-preview"></div>').css("right",0),k=e('<img class="ke-preview-img" src="'+i+p+'.gif" />'),_.append(w),w.append(k));var C,x=s(a,_);d(a)})});