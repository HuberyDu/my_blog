/*******************************************************************************
* KindEditor - WYSIWYG HTML Editor for Internet
* Copyright (C) 2006-2011 kindsoft.net
*
* @author Roddy <luolonghao@gmail.com>
* @site http://www.kindsoft.net/
* @licence http://www.kindsoft.net/license.php
*******************************************************************************/
KindEditor.plugin("emoticons",function(e){var t=this,n="emoticons",i=t.emoticonsPath||t.pluginsPath+"emoticons/images/",r=void 0===t.allowPreviewEmoticons?!0:t.allowPreviewEmoticons,a=1;t.clickToolbar(n,function(){function o(n,r,a){w?n.mouseover(function(){r>v?(w.css("left",0),w.css("right","")):(w.css("left",""),w.css("right",0)),C.attr("src",i+a+".gif"),e(this).addClass("ke-on")}):n.mouseover(function(){e(this).addClass("ke-on")}),n.mouseout(function(){e(this).removeClass("ke-on")}),n.click(function(e){t.insertHtml('<img src="'+i+a+'.gif" border="0" alt="" />').hideMenu().focus(),e.stop()})}function s(t,n){var r=document.createElement("table");n.append(r),w&&(e(r).mouseover(function(){w.show("block")}),e(r).mouseout(function(){w.hide()}),b.push(e(r))),r.className="ke-table",r.cellPadding=0,r.cellSpacing=0,r.border=0;for(var a=(t-1)*m+p,s=0;d>s;s++)for(var l=r.insertRow(s),c=0;f>c;c++){var u=e(l.insertCell(c));u.addClass("ke-cell"),o(u,c,a);var h=e('<span class="ke-img"></span>').css("background-position","-"+24*a+"px 0px").css("background-image","url("+i+"static.gif)");u.append(h),b.push(u),a++}return r}function l(){e.each(b,function(){this.unbind()})}function c(e,t){e.click(function(e){l(),k.parentNode.removeChild(k),x.remove(),k=s(t,y),u(t),a=t,e.stop()})}function u(t){x=e('<div class="ke-page"></div>'),y.append(x);for(var n=1;g>=n;n++){if(t!==n){var i=e('<a href="javascript:;">['+n+"]</a>");c(i,n),x.append(i),b.push(i)}else x.append(e("@["+n+"]"));x.append(e("@&nbsp;"))}}var d=5,f=9,h=135,p=0,m=d*f,g=Math.ceil(h/m),v=Math.floor(f/2),y=e('<div class="ke-plugin-emoticons"></div>'),b=[],_=t.createMenu({name:n,beforeRemove:function(){l()}});_.div.append(y);var w,C;r&&(w=e('<div class="ke-preview"></div>').css("right",0),C=e('<img class="ke-preview-img" src="'+i+p+'.gif" />'),y.append(w),w.append(C));var x,k=s(a,y);u(a)})});